<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Market Alerts is a simple API to calculate market indicators and signals across different timeframes in Commodity, Bonds, Stock Indices and FX markets.</p>

<p>The API works in a REST like manner over HTTP, and covers these areas:</p>

<ul>
<li>Market Data

<ul>
<li>Download historical open,high,low,close data for various instruments in different timeframes.</li>
</ul></li>
<li>Indicators

<ul>
<li>Calculate different technical indicators

<ul>
<li>RSI, Moving averages, MACD, Bollinger Bands, Average True Range, Minimum/Maximum/Previous period values.</li>
</ul></li>
</ul></li>
<li>Signals

<ul>
<li>Test for the existence of market signals, eg:

<ul>
<li>close &gt; ema(close,200) # Price closed above 200-day moving average</li>
<li>crossoverup(rsi(close,14),70) # RSI just went above 70</li>
</ul></li>
</ul></li>
</ul>

<h1 id="authentication">Authentication</h1>

<p>MarketAlerts is open for beta and does not currently require Authentication.</p>

<h1 id="api-reference">API Reference</h1>

<h2 id="indicators">indicators</h2>

<blockquote>
<p>See also the full <a href='#function-reference'>indicator function reference</a></p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
<span class="s2">"http://api.fxhistoricaldata.com/v1/indicators?expression=close,ema(close,200),rsi(close,14)&amp;instruments=USDJPY"</span>

<span class="c"># Example expressions</span>
open,high,low,close
rsi<span class="o">(</span>close,14<span class="o">)</span>
ema<span class="o">(</span>close,200<span class="o">)</span>
rsi<span class="o">(</span>ema<span class="o">(</span>close,20<span class="o">)</span>,14<span class="o">)</span>

</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    results: <span class="o">{</span>
        USDJPY: <span class="o">{</span>
            data: <span class="o">[</span>
                <span class="o">[</span>
                <span class="s2">"2016-10-07 00:00:00"</span>,
                <span class="s2">"103.1000"</span>,
                <span class="s2">"107.5165"</span>,
                <span class="s2">"57.80"</span>
                <span class="o">]</span>
            <span class="o">]</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>This endpoint retrieves market data and calculates technical indicators</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://api.fxhistoricaldata.com/v1/indicators</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>expression</td>
<td>Yes</td>
<td></td>
<td>A comma separated list of technical indicators to be calculated.</td>
</tr>
<tr>
<td>instruments</td>
<td>Yes</td>
<td></td>
<td>A list of instruments for which to calculate the indicators expression. See the <a href='#available-markets'>list of available instruments</a>.</td>
</tr>
<tr>
<td>timeframe</td>
<td>No</td>
<td>day</td>
<td>The timeframe of the request. One of &lsquo;5min&rsquo;, &#39;15min&rsquo;, &#39;30min&rsquo;, &#39;hour&rsquo;, &#39;2hour&rsquo;, &#39;3hour&rsquo;, &#39;4hour&rsquo;, &#39;day&rsquo;.  This is ignored if the expression uses multiple timeframe signals.</td>
</tr>
<tr>
<td>itemcount</td>
<td>No</td>
<td>1</td>
<td>The number of data items to return.</td>
</tr>
</tbody></table>

<h2 id="signals">signals</h2>

<blockquote>
<p>See also the full <a href='#signal-reference'>signal expression reference</a></p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="se">\</span>
<span class="s2">"http://api.fxhistoricaldata.com/v1/signals?expression=close&gt;ema(close,200) and rsi(close,14)&lt;50&amp;s=USDJPY"</span>

<span class="c"># Example expressions</span>
rsi<span class="o">(</span>close,14<span class="o">)</span> &gt; 70
close &gt; ema<span class="o">(</span>close,200<span class="o">)</span>
<span class="c"># Mixed timeframes are also allowed in expressions</span>
day<span class="o">(</span>close &gt; ema<span class="o">(</span>close,200<span class="o">))</span> and 4hour<span class="o">(</span>close &lt; ema<span class="o">(</span>close,200<span class="o">))</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    results: <span class="o">{</span>
        USDJPY: <span class="o">{</span>
            data: <span class="o">[</span>
                <span class="o">[</span>
                    <span class="s2">"2016-10-07 00:00:00"</span>
                <span class="o">]</span>
            <span class="o">]</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>This endpoint calculates signals ie: rsi crossed above 70, closing price is above upper bollinger band, etc</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://api.fxhistoricaldata.com/v1/signals</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>expression</td>
<td>Yes</td>
<td></td>
<td>The signal expression to be evaluated.</td>
</tr>
<tr>
<td>instruments</td>
<td>Yes</td>
<td></td>
<td>A list of instruments for which to calculate the signal expression. See the <a href='#available-markets'>list of available instruments</a>.</td>
</tr>
<tr>
<td>timeframe</td>
<td>No</td>
<td>day</td>
<td>The timeframe of the request. One of &#39;5min&rsquo;, &#39;15min&rsquo;, &#39;30min&rsquo;, &#39;hour&rsquo;, &#39;2hour&rsquo;, &#39;3hour&rsquo;, &#39;4hour&rsquo;, &#39;day&rsquo;.  This is ignored if the expression uses multiple timeframe signals.</td>
</tr>
<tr>
<td>itemcount</td>
<td>No</td>
<td>1</td>
<td>The maximum number of data items to return.</td>
</tr>
<tr>
<td>start_period</td>
<td>No</td>
<td>3 months ago</td>
<td>A datetime in the UTC timezone representing the date of the earliest signal to be returned</td>
</tr>
<tr>
<td>end_period</td>
<td>No</td>
<td>now</td>
<td>A datetime in the UTC timezone representing the date of the lastest signal to be returned</td>
</tr>
</tbody></table>

<h1 id="function-reference">Function reference</h1>

<aside class="notice">
Expressions can be arbitrarly nested, ie: <code>rsi(ema(close,20),14</code>
</aside>

<h2 id="open-high-low-close">open,high,low,close</h2>

<p>The open, high, low and closing price of the security in the given timeframe.</p>

<h2 id="ema-expression-n">ema(expression, n)</h2>
<pre class="highlight shell"><code>ema<span class="o">(</span>close,200<span class="o">)</span>
ema<span class="o">(</span>abs<span class="o">(</span>high-low<span class="o">)</span>,20<span class="o">)</span>
</code></pre>

<p>Exponential moving average of expression of n periods</p>

<h2 id="sma-expression-n">sma(expression, n)</h2>
<pre class="highlight shell"><code>sma<span class="o">(</span>close,200<span class="o">)</span>
sma<span class="o">(</span>abs<span class="o">(</span>high-low<span class="o">)</span>,20<span class="o">)</span>
</code></pre>

<p>Simple moving average of expression over n periods</p>

<h2 id="rsi-expression-n">rsi(expression, n)</h2>
<pre class="highlight shell"><code>rsi<span class="o">(</span>close,14<span class="o">)</span>
</code></pre>

<p>Relative strength index of expression over n periods</p>

<h2 id="max-expression-n">max(expression, n)</h2>
<pre class="highlight shell"><code>max<span class="o">(</span>high,10<span class="o">)</span>
</code></pre>

<p>Maximum value of expression over n periods</p>

<h2 id="min-expression-n">min(expression, n)</h2>
<pre class="highlight shell"><code>min<span class="o">(</span>low,10<span class="o">)</span>
</code></pre>

<p>Minimum value of expression over n periods</p>

<h2 id="tr">tr()</h2>
<pre class="highlight shell"><code>tr<span class="o">()</span>
</code></pre>

<p>True range is defined as:
max[ (high-low), abs(high - previous_close), abs(low - previous_close) ]</p>

<h2 id="atr-n">atr(n)</h2>
<pre class="highlight shell"><code>atr<span class="o">(</span>14<span class="o">)</span>
</code></pre>

<p>Average true range over n periods (eg: atr(14) )</p>

<h2 id="previous-expression-n">previous(expression, n)</h2>
<pre class="highlight shell"><code>previous<span class="o">(</span>close, 1<span class="o">)</span>
</code></pre>

<p>Value of expression n periods ago, useful to calculate crossover signals </p>

<h2 id="bolhigh-expression-n-y">bolhigh(expression, n, y)</h2>
<pre class="highlight shell"><code>bolhigh<span class="o">(</span>close,21,2<span class="o">)</span>
</code></pre>

<p>Upper bollinger band of expression </p>

<h2 id="bollow-expression-n-y">bollow(expression, n, y)</h2>
<pre class="highlight shell"><code>bollow<span class="o">(</span>close, 21, 2<span class="o">)</span>
</code></pre>

<p>Lower bollinger band of expression </p>

<h2 id="macd-expression-shortperiod-longperiod-smoothingperiod">macd(expression, shortperiod, longperiod, smoothingperiod)</h2>
<pre class="highlight shell"><code>macd<span class="o">(</span>close, 12, 26, 9<span class="o">)</span>
</code></pre>

<p>Macd value of expression</p>

<h2 id="macdsig-expression-shortperiod-longperiod-smoothingperiod">macdsig(expression, shortperiod, longperiod, smoothingperiod)</h2>
<pre class="highlight shell"><code>macdsig<span class="o">(</span>close, 12, 26, 9<span class="o">)</span>
</code></pre>

<p>Macd signal value of expression</p>

<h2 id="macddiff-expression-shortperiod-longperiod-smoothingperiod">macddiff(expression, shortperiod, longperiod, smoothingperiod)</h2>
<pre class="highlight shell"><code>macddiff<span class="o">(</span>close, 12, 26, 9<span class="o">)</span>
</code></pre>

<p>Difference between macd and the macd signal (eg: macddiff(close, 12, 26, 9) )</p>

<h2 id="abs-expression">abs(expression)</h2>
<pre class="highlight shell"><code>abs<span class="o">(</span> close - previous<span class="o">(</span>close,1<span class="o">)</span> <span class="o">)</span>
</code></pre>

<p>Returns absolute value of expression (eg: abs(close - previous(close, 1)) )</p>

<h1 id="signal-reference">Signal reference</h1>

<h2 id="crossoverup-expression1-expression2">crossoverup(expression1,expression2)</h2>
<pre class="highlight shell"><code>crossoverup<span class="o">(</span>close,ema<span class="o">(</span>close,200<span class="o">))</span>
</code></pre>

<p>True when expression1 goes above expression2.</p>

<h2 id="crossoverdown-expression1-expression2">crossoverdown(expression1,expression2)</h2>
<pre class="highlight shell"><code>crossoverdown<span class="o">(</span>close,ema<span class="o">(</span>close,200<span class="o">))</span>
</code></pre>

<p>True when expression1 goes below expression2.</p>

<h2 id="expression1-compare_to-expression2">expression1 compare_to expression2</h2>
<pre class="highlight shell"><code>ema<span class="o">(</span>close,50<span class="o">)</span> &gt;  ema<span class="o">(</span>close,200<span class="o">)</span>
ema<span class="o">(</span>close,50<span class="o">)</span> &gt;<span class="o">=</span> ema<span class="o">(</span>close,200<span class="o">)</span>
ema<span class="o">(</span>close,50<span class="o">)</span> &lt;  ema<span class="o">(</span>close,200<span class="o">)</span>
ema<span class="o">(</span>close,50<span class="o">)</span> &lt;<span class="o">=</span> ema<span class="o">(</span>close,200<span class="o">)</span>
</code></pre>

<p>Compares expression1 to expression2, ie, greater, greater than, lesser, lesser than.</p>

<h2 id="multiple-timeframe-signals">Multiple timeframe signals</h2>
<pre class="highlight shell"><code>day<span class="o">(</span>close &gt; ema<span class="o">(</span>close,200<span class="o">))</span> and 4hour<span class="o">(</span>close &lt; ema<span class="o">(</span>close,200<span class="o">))</span>
</code></pre>

<p>Compare signals in different timeframes. When using expressions with multiple timeframe signals, the timeframe querystring parameter is ignored.  The following timeframe functions are available:</p>

<ul>
<li>5min</li>
<li>15min</li>
<li>30min</li>
<li>hour</li>
<li>2hour</li>
<li>3hour</li>
<li>4hour</li>
<li>day</li>
</ul>

<h3 id="limitations">Limitations</h3>

<h4 id="unique-timeframe-functions">Unique timeframe functions</h4>

<blockquote>
<p>This doesn&rsquo;t work</p>
</blockquote>
<pre class="highlight shell"><code>hour<span class="o">(</span>close &gt; ema<span class="o">(</span>close,21<span class="o">))</span> and hour<span class="o">(</span>ema<span class="o">(</span>close,21<span class="o">)</span> &gt; ema<span class="o">(</span>close,50<span class="o">))</span> and 2hour<span class="o">(</span>close &gt; ema<span class="o">(</span>close,21<span class="o">))</span>
</code></pre>

<blockquote>
<p>But this does</p>
</blockquote>
<pre class="highlight shell"><code>hour<span class="o">(</span>close &gt; ema<span class="o">(</span>close,21<span class="o">)</span> and ema<span class="o">(</span>close,21<span class="o">)</span> &gt; ema<span class="o">(</span>close,50<span class="o">))</span> and 2hour<span class="o">(</span>close &gt; ema<span class="o">(</span>close,21<span class="o">))</span>
</code></pre>

<p>A timeframe function can only be called once per expression, however, multiple expressions can exist inside a timeframe function.</p>

<h4 id="boolean-combinations">Boolean combinations</h4>

<blockquote>
<p>This doesn&rsquo;t work</p>
</blockquote>
<pre class="highlight shell"><code>hour<span class="o">(</span>signal_expression<span class="o">)</span> and 2hour<span class="o">(</span>signal_expression<span class="o">)</span> or hour<span class="o">(</span>signal_expression<span class="o">)</span>
</code></pre>

<blockquote>
<p>But these do</p>
</blockquote>
<pre class="highlight shell"><code>hour<span class="o">(</span>signal_expression<span class="o">)</span> and 2hour<span class="o">(</span>signal_expression<span class="o">)</span> and hour<span class="o">(</span>signal_expression<span class="o">)</span>
hour<span class="o">(</span>signal_expression<span class="o">)</span> or  2hour<span class="o">(</span>signal_expression<span class="o">)</span> or  hour<span class="o">(</span>signal_expression<span class="o">)</span>
</code></pre>

<p>Signal expressions with multiple timeframes are only supported when the different timeframe functions are joined by the same boolean operator (one of &#39;and&rsquo;,&#39;or&rsquo;).</p>

<h1 id="available-markets">Available markets</h1>

<p>The list of instruments available can be retrieved programmatically with a get request to the instruments endpoint.</p>
<pre class="highlight shell"><code>curl <span class="se">\</span>
http://api.fxhistoricaldata.com/v1/instruments
</code></pre>

<h2 id="forex">Forex</h2>

<ul>
<li>AUDUSD</li>
<li>AUDJPY</li>
<li>AUDNZD</li>
<li>CHFJPY</li>
<li>EURCAD</li>
<li>EURCHF</li>
<li>EURGBP</li>
<li>EURJPY</li>
<li>EURUSD</li>
<li>GBPCHF</li>
<li>GBPJPY</li>
<li>GBPNZD</li>
<li>GBPUSD</li>
<li>NZDUSD</li>
<li>NZDJPY</li>
<li>USDCAD</li>
<li>USDCHF</li>
<li>USDHKD</li>
<li>USDJPY</li>
<li>USDOLLAR</li>
</ul>

<h2 id="commodities-bonds">Commodities/Bonds</h2>

<ul>
<li>XAUUSD</li>
<li>XAGUSD</li>
<li>UKOil</li>
<li>UKOilUSD - Brent crude priced in US Dollars</li>
<li>USOil</li>
<li>Bund</li>
<li>BundUSD - German Bunds priced in US Dollars</li>
</ul>

<h2 id="stock-market-indices">Stock Market Indices</h2>

<ul>
<li>AUS200</li>
<li>AUS200USD - AUS200 priced in US Dollars</li>
<li>ESP35</li>
<li>ESP35USD - ESP35 priced in US Dollars</li>
<li>FRA40</li>
<li>FRA40USD - FRA40 priced in US Dollars</li>
<li>GER30</li>
<li>GER30USD - GER30 priced in US Dollars</li>
<li>HKG33</li>
<li>HKG33USD - HKG33 priced in US Dollars</li>
<li>JPN225</li>
<li>JPN225USD - JPN225 priced in US Dollars</li>
<li>NAS100</li>
<li>SPX500</li>
<li>UK100</li>
<li>UK100USD - UK100 priced in US Dollars</li>
<li>US30</li>
</ul>

          <h1 id="errors">Errors</h1>

<blockquote>
<p>The API returns structured errors that look like:</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"error_id"</span>,
    <span class="s2">"message"</span>: <span class="s2">"Error description"</span>,
    <span class="s2">"url"</span>: <span class="s2">"More detailed information about how to resolve the error"</span>
<span class="o">}</span>
</code></pre>

<p>The API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; The input in the request is invalid. Check error message and URL for help fixing the request.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

          <h1 id="status">Status</h1>

<h2 id="api-status-page">API Status page</h2>

<p><a title='API status page' href='http://status.fxhistoricaldata.com/'>http://status.fxhistoricaldata.com/</a></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
